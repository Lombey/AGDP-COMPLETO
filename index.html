<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGDP Dashboard | Minimal</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        :root {
            --primary: #204B42; 
            --primary-hover: #163630;
            --bg-body: #f8fafc;
            --surface: #ffffff;
            --border: #e2e8f0;
            --text-main: #0f172a;
            --text-light: #64748b;
            --header-height: 64px;
            --sidebar-width: 240px;
        }

        body.dark-mode {
            --primary: #2d6a5e;
            --bg-body: #0f172a;       
            --surface: #1e293b;        
            --border: #334155;        
            --text-main: #f1f5f9;     
            --text-light: #94a3b8;    
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: system-ui, -apple-system, sans-serif; background-color: var(--bg-body); color: var(--text-main); height: 100vh; overflow: hidden; }

        /* LAYOUT */
        .app-container { display: flex; flex-direction: column; height: 100vh; }
        .main-layout { display: flex; flex: 1; overflow: hidden; position: relative; }

        /* HEADER */
        header { background-color: #204B42; height: var(--header-height); padding: 0 1.5rem; display: flex; justify-content: space-between; align-items: center; color: white; flex-shrink: 0; z-index: 50; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .brand { display: flex; align-items: center; gap: 1rem; }
        .brand h1 { font-size: 1.1rem; font-weight: 600; margin: 0; display: flex; align-items: center; gap: 0.5rem; }
        .logo-box { width:32px; height:32px; background:white; color:#204B42; font-weight:bold; display:flex; align-items:center; justify-content:center; border-radius:4px; font-size: 0.8rem; }
        
        .header-actions { display: flex; gap: 0.8rem; align-items: center; }
        .nav-icon-btn { background: rgba(255,255,255,0.15); border: none; color: white; width: 36px; height: 36px; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: background 0.2s; }
        .nav-icon-btn:hover { background: rgba(255,255,255,0.25); }

        /* SIDEBAR */
        .sidebar { width: var(--sidebar-width); background-color: var(--surface); border-right: 1px solid var(--border); display: flex; flex-direction: column; padding-top: 1rem; transition: margin-left 0.3s ease; flex-shrink: 0; }
        .sidebar.collapsed { margin-left: calc(var(--sidebar-width) * -1); }
        .sidebar-item { display: flex; gap: 0.8rem; padding: 0.8rem 1.5rem; color: var(--text-light); cursor: pointer; font-size: 0.9rem; align-items: center; border-left: 3px solid transparent; transition: all 0.2s; font-weight: 500; }
        .sidebar-item:hover { background: var(--bg-body); color: var(--primary); }
        .sidebar-item.active { color: var(--primary); background: rgba(32, 75, 66, 0.08); border-left-color: var(--primary); }
        .sidebar-footer { margin-top: auto; padding: 1rem; border-top: 1px solid var(--border); display: flex; justify-content: flex-end; }

        /* CONTENT AREA */
        .content-area { flex: 1; padding: 2rem; overflow-y: auto; background-color: var(--bg-body); display: flex; justify-content: center; align-items: center; color: var(--text-light); }
        
        /* UTIL */
        .hidden-mobile { display: block; }
        @media (max-width: 768px) { 
            .sidebar { position: fixed; height: 100%; left: -100%; z-index: 100; box-shadow: 5px 0 15px rgba(0,0,0,0.1); } 
            .sidebar.mobile-open { left: 0; } 
            .hidden-mobile { display: none; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // --- ICONOS MINIMIZADOS ---
        const IconWrapper = ({ children, size=24, ...props }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>{children}</svg>
        );

        const Icons = {
            Menu: (p) => <IconWrapper {...p}><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></IconWrapper>,
            Moon: (p) => <IconWrapper {...p}><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></IconWrapper>,
            Sun: (p) => <IconWrapper {...p}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></IconWrapper>,
            User: (p) => <IconWrapper {...p}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></IconWrapper>,
            Download: (p) => <IconWrapper {...p}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></IconWrapper>,
            MapPin: (p) => <IconWrapper {...p}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></IconWrapper>,
            ChevronLeft: (p) => <IconWrapper {...p}><path d="m15 18-6-6 6-6"/></IconWrapper>,
            ChevronRight: (p) => <IconWrapper {...p}><path d="m9 18 6-6-6-6"/></IconWrapper>
        };

        const IconTolva = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <path d="M3 10L5 17H10L12 10H3Z" />
                <path d="M13 17H18V12H13" />
                <circle cx="7.5" cy="17.5" r="2.5" />
                <circle cx="15.5" cy="17.5" r="2.5" />
            </svg>
        );

        // --- COMPONENTES ---

        const Header = ({ darkMode, toggleDarkMode, toggleSidebar }) => (
            <header>
                <div className="brand">
                    <button className="nav-icon-btn" onClick={toggleSidebar} style={{marginRight:'0.5rem'}}><Icons.Menu size={24}/></button>
                    <div className="logo-box">AG</div>
                    <h1 className="hidden-mobile">AGDP System</h1>
                </div>
                <div className="header-actions">
                    <button className="nav-icon-btn" onClick={toggleDarkMode}>{darkMode ? <Icons.Sun size={20}/> : <Icons.Moon size={20}/>}</button>
                    <button className="nav-icon-btn"><Icons.User size={20}/></button>
                </div>
            </header>
        );

        const Sidebar = ({ activeTab, setActiveTab, collapsed, toggleCollapse }) => {
            const items = [
                { id: 'descargas', label: 'Descargas', icon: <Icons.Download size={20}/> },
                { id: 'tolvas', label: 'Tolvas', icon: <IconTolva size={22}/> },
                { id: 'establecimientos', label: 'Establecimientos', icon: <Icons.MapPin size={20}/> },
            ];
            
            return (
                <div className={`sidebar ${collapsed ? 'collapsed' : ''} ${!collapsed ? 'mobile-open' : ''}`}>
                    {items.map(i => (
                        <div key={i.id} className={`sidebar-item ${activeTab===i.id ? 'active' : ''}`} onClick={() => setActiveTab(i.id)}>
                            {i.icon} <span>{i.label}</span>
                        </div>
                    ))}
                    <div className="sidebar-footer">
                        <button className="nav-icon-btn" style={{color:'var(--text-light)', marginLeft:'auto'}} onClick={toggleCollapse}>
                            {collapsed ? <Icons.ChevronRight/> : <Icons.ChevronLeft/>}
                        </button>
                    </div>
                </div>
            );
        };

        const EmptyModule = ({ title }) => (
            <div className="content-area">
                <div style={{textAlign:'center', opacity: 0.5}}>
                    <h3>Módulo: {title.charAt(0).toUpperCase() + title.slice(1)}</h3>
                    <p>Sin contenido disponible</p>
                </div>
            </div>
        );

        const App = () => {
            const [darkMode, setDarkMode] = useState(false);
            const [activeTab, setActiveTab] = useState('descargas');
            const [sidebarCollapsed, setSidebarCollapsed] = useState(false);

            useEffect(() => { document.body.className = darkMode ? 'dark-mode' : ''; }, [darkMode]);

            return (
                <div className="app-container">
                    <Header 
                        darkMode={darkMode} 
                        toggleDarkMode={() => setDarkMode(!darkMode)} 
                        toggleSidebar={() => setSidebarCollapsed(prev => !prev)} 
                    />
                    <div className="main-layout">
                        <Sidebar 
                            activeTab={activeTab} 
                            setActiveTab={setActiveTab} 
                            collapsed={sidebarCollapsed}
                            toggleCollapse={() => setSidebarCollapsed(!sidebarCollapsed)}
                        />
                        <main style={{flex:1, overflow:'hidden', display:'flex', flexDirection:'column'}}>
                            {/* Renderizado de módulo vacío dinámico */}
                            <EmptyModule title={activeTab} />
                        </main>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
